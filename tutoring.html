<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BCA BLSU Tutoring Schedule</title>
<!-- Compiled and minified Materialize CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<style>
  .tutor {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  /* No need to hide the tutors by default */
</style>

    <link rel="stylesheet" href="index.css">

</head>
<body>

<!-- <nav class="grey lighten-4">
  <div class="nav-wrapper container">
    <a href="#" class="brand-logo black-text">BCA BLSU</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="#" class="black-text">Login</a></li>
    </ul>
  </div>
</nav> -->


<main>
    <nav class="black">

      <div class="nav-wrapper">
          <a href="#" class="brand-logo">BCA BLSU</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown1"> <a href="tutoring.html">Tutoring</a>   </a></li>
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown2"> <a href="material.html"> Club Materials </a>  </a> </li>
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown3"> BHM </a></li>
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown4">  <a href="hhm.html"> HHM </a> </a></li>
            <li><a class="dropdown-trigger" href="#!" data-target="dropdown5"> <a href="events.html">Current Events</a></li>

          </ul>
        </div>
      </nav>
        
        <!-- Dropdown Structure -->
        <ul id="dropdown1" class="dropdown-content">
          <li><a href="/tutoring.html">Tutoring</a></li>
          <li><a href="/tutoring.html">Sub-Item 1</a></li>
          <li><a href="/tutoring.html">Sub-Item 2</a></li>
        </ul>
        
        <ul id="dropdown2" class="dropdown-content">
          <li><a href="/club-materials.html">Club Materials</a></li>
          <li><a href="/club-materials.html">Sub-Item 1</a></li>
          <li><a href="/club-materials.html">Sub-Item 2</a></li>
        </ul>
        
        <ul id="dropdown3" class="dropdown-content">
          <li><a href="/black-history-month.html">Black History Month</a></li>
          <li><a href="/black-history-month.html">Sub-Item 1</a></li>
          <li><a href="/black-history-month.html">Sub-Item 2</a></li>
        </ul>
        
  </main>


  <div class="container">
    <div class="section">
        <h4>Tutoring Schedule</h4>
        <div class="row">
            <div class="input-field col s12 m3">
                <input id="search" type="text" class="validate">
                <label for="search">Search by Tutor Name</label>
            </div>
            <div class="input-field col s12 m3">
                <select id="subject-filter">
                    <option value="" disabled selected>Choose Subject</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Science">Science</option>
                    <option value="Literature">Literature</option>
                    <!-- Add more subjects as needed -->
                </select>
                <label>Filter by Subject</label>
            </div>
            <div class="input-field col s12 m3">
                <select id="day-filter">
                    <option value="" disabled selected>Choose Day</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <!-- Add more days as needed -->
                </select>
                <label>Filter by Day</label>
            </div>
            <div class="input-field col s12 m3">
                <input id="time-filter" type="text" class="validate">
                <label for="time-filter">Filter by Time</label>
            </div>
            <div class="col s12">
                <button class="btn waves-effect waves-light" onclick="searchTutors()">Search
                    <i class="material-icons right"></i>
                </button>
            </div>
        </div>

<div class="container">
  <div class="section">
    <h4>Tutoring Schedule</h4>
    <!-- Other content and filter options can go here -->
    <div class="row">
      <!-- Calendar structure -->
      <!-- HTML Structure -->
        <div class="col s12">
          <!-- Monday -->
          <ul id="tutor-list" class="collection with-header">
            <li class="collection-header"><h5>Monday</h5></li>
          </ul>
          <!-- Tuesday -->
          <!-- ... (other days) ... -->
        </div>
    </div>
  </div>
</div>

<footer class="page-footer grey lighten-3">
  <div class="container">
    <span class="black-text">Footer: with Insta, Facebook, Linkedin (the what-if socials)</span>
  </div>
</footer>

<!-- Compiled and minified Materialize JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elemsSelect = document.querySelectorAll('select');
    var instancesSelect = M.FormSelect.init(elemsSelect);
  
    // Fetch tutor data from the server
    fetch('/tutors') // Make sure this is the correct endpoint
    .then(response => response.json())
    .then(data => {
        console.log(data); // This will log the data to the console
        const tutorList = document.getElementById('tutor-list');
        data.forEach(tutor => {
            // Ensure the 'day' and 'time' properties exist in the 'tutor' object
            console.log(tutor.day, tutor.time); // This will log each tutor's day and time to the console

            const tutorItem = document.createElement('li');
            tutorItem.classList.add('collection-item', 'tutor');
            tutorItem.textContent = `${tutor.username} - ${tutor.email} - ${tutor.subject} - ${tutor.day_available} - ${tutor.time_available}`;
            
            tutorItem.setAttribute('data-subject', tutor.subject || 'N/A');
            tutorItem.setAttribute('data-day_available', tutor.day_available || 'N/A');
            tutorItem.setAttribute('data-time_available', tutor.time_available || 'N/A');
            
            tutorList.appendChild(tutorItem);
        });
    })
    .catch(error => {
        console.error('Error fetching tutor data:', error);
    });

  });
  
  function searchTutors() {
    var searchInput = document.getElementById('search').value.toLowerCase();
    var subjectFilter = document.getElementById('subject-filter').value;
    var dayFilter = document.getElementById('day-filter').value;
    var timeFilter = document.getElementById('time-filter').value.toLowerCase();
    var tutors = document.querySelectorAll('.tutor');

    console.log('Filters:', {searchInput, subjectFilter, dayFilter, timeFilter});

    tutors.forEach(function(tutor) {
        var name = tutor.textContent.toLowerCase();
        var subject = tutor.getAttribute('data-subject').toLowerCase();
        var day = tutor.getAttribute('data-day_available').toLowerCase();
        var time = tutor.getAttribute('data-time_available').toLowerCase();

        console.log('Tutor Data:', {name, subject, day, time});

        var nameMatch = name.includes(searchInput);
        var subjectMatch = (subjectFilter === '' || subject === subjectFilter.toLowerCase());
        var dayMatch = (dayFilter === '' || day === dayFilter.toLowerCase());
        var timeMatch = (timeFilter === '' || time.includes(timeFilter));

        console.log('Matches:', {nameMatch, subjectMatch, dayMatch, timeMatch});

        if (nameMatch && subjectMatch && dayMatch && timeMatch) {
            tutor.style.display = '';
        } else {
            tutor.style.display = 'none';
        }
    });
}

  
  </script>

</body>
</html>
