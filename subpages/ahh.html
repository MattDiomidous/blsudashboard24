<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BCA BLSU Tutoring Schedule</title>
<!-- Bootstrap CSS -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .tutor {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  h4 {
    font-weight: bold;
  }
  .calendar {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }
</style>
</head>
<body>
<div class="container">
  <div class="section mt-5">
    <h4>Schedule a Tutor</h4>
    <form id="schedule-form">
      <div class="form-group">
        <label for="student-name">Name</label>
        <input type="text" class="form-control" id="student-name" required>
      </div>
      <div class="form-group">
        <label for="student-email">Email</label>
        <input type="email" class="form-control" id="student-email" required>
      </div>
      <div class="form-group">
        <label for="tutor-selection">Select Tutor (Name or Email)</label>
        <select class="form-control" id="tutor-selection" required>
          <option value="" disabled selected>Select Tutor</option>
          <!-- Tutor options will be populated here -->
        </select>
      </div>
      <div class="form-group">
        <label for="appointment-date">Date</label>
        <input type="date" class="form-control" id="appointment-date" required>
      </div>
      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea class="form-control" id="notes" rows="3"></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>

  <div class="section mt-5">
    <h4>Our Tutor's Availability</h4>
    <div class="row">
      <div class="col-12">
        <ul id="monday-tutors" class="list-group">
          <li class="list-group-item active">Monday</li>
        </ul>
        <ul id="tuesday-tutors" class="list-group">
          <li class="list-group-item active">Tuesday</li>
        </ul>
        <ul id="wednesday-tutors" class="list-group">
          <li class="list-group-item active">Wednesday</li>
        </ul>
        <ul id="thursday-tutors" class="list-group">
          <li class="list-group-item active">Thursday</li>
        </ul>
        <ul id="friday-tutors" class="list-group">
          <li class="list-group-item active">Friday</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  $(document).ready(function() {
    fetch('/tutors')
      .then(response => response.json())
      .then(data => {
        const tutorSelect = document.getElementById('tutor-selection');
        const days = {
          'Monday': document.getElementById('monday-tutors'),
          'Tuesday': document.getElementById('tuesday-tutors'),
          'Wednesday': document.getElementById('wednesday-tutors'),
          'Thursday': document.getElementById('thursday-tutors'),
          'Friday': document.getElementById('friday-tutors'),
        };

        data.forEach(tutor => {
          const option = document.createElement('option');
          option.value = tutor.email;
          option.textContent = `${tutor.username} (${tutor.email})`;
          tutorSelect.appendChild(option);

          const tutorItem = document.createElement('li');
          tutorItem.classList.add('list-group-item', 'tutor');
          tutorItem.textContent = `${tutor.username} - ${tutor.email} - ${tutor.subject} - ${tutor.day_available} - ${tutor.time_available}`;
          tutorItem.setAttribute('data-subject', tutor.subject || 'N/A');
          tutorItem.setAttribute('data-day_available', tutor.day_available || 'N/A');
          tutorItem.setAttribute('data-time_available', tutor.time_available || 'N/A');

          if (days[tutor.day_available]) {
            days[tutor.day_available].appendChild(tutorItem);
          } else {
            console.error('Day not found for tutor:', tutor);
          }
        });
      })
      .catch(error => {
        console.error('Error fetching tutor data:', error);
      });

    $('#schedule-form').on('submit', function(event) {
      event.preventDefault();
      const formData = {
        name: $('#student-name').val(),
        email: $('#student-email').val(),
        tutor: $('#tutor-selection').val(),
        date: $('#appointment-date').val(),
        notes: $('#notes').val(),
      };
      console.log('Form Data:', formData);
      // Add code here to handle form submission, e.g., send data to the server
    });
  });
</script>
</body>
</html>

