<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BCA BLSU Tutoring Schedule</title>
<!-- Compiled and minified Materialize CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<style>
  .tutor {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  /* No need to hide the tutors by default */
</style>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<!-- <nav class="grey lighten-4">
  <div class="nav-wrapper container">
    <a href="#" class="brand-logo black-text">BCA BLSU</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="#" class="black-text">Login</a></li>
    </ul>
  </div>
</nav> -->
<main>
    <nav class="black">
      <div class="nav-wrapper">
            <a href="#" class="brand-logo">BCA BLSU</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <!-- ... all other navigation links from index.html ... -->
                <li><a class="dropdown-trigger" href="#!" data-target="dropdown1"> <a href="/">Home</a>   </a></li>
                <li id="materials" style="display: none;"><a href="material.html">Club Materials</a></li>                        
                <li><a class="dropdown-trigger" href="#!" data-target="dropdown3">  <a href="hhm.html">  BHM </a></li>
                <li><a class="dropdown-trigger" href="#!" data-target="dropdown4">  <a href="hhm.html"> HHM </a> </a></li>
                <li><a class="dropdown-trigger" href="#!" data-target="dropdown5"> <a href="blog.html">Blog</a></li>
                <li id="manageAccount" style="display: none;"><a href="account.html">Manage Account</a></li>            
                <li id="adminLink" style="display: none;"><a href="admin.html">Administrator</a></li>   
            </ul>
        </div>
      </nav>
        
        <!-- Dropdown Structure -->
        <ul id="dropdown1" class="dropdown-content">
          <li><a href="/tutoring.html">Tutoring</a></li>
          <li><a href="/tutoring.html">Sub-Item 1</a></li>
          <li><a href="/tutoring.html">Sub-Item 2</a></li>
        </ul>
        
        <ul id="dropdown2" class="dropdown-content">
          <li><a href="/club-materials.html">Club Materials</a></li>
          <li><a href="/club-materials.html">Sub-Item 1</a></li>
          <li><a href="/club-materials.html">Sub-Item 2</a></li>
        </ul>
        
        <ul id="dropdown3" class="dropdown-content">
          <li><a href="/black-history-month.html">Black History Month</a></li>
          <li><a href="/black-history-month.html">Sub-Item 1</a></li>
          <li><a href="/black-history-month.html">Sub-Item 2</a></li>
        </ul>
        
  </main>
  <div class="container">
    <div class="section">
        <h4>Tutoring Schedule</h4>
        <div class="row">
            <div class="input-field col s12 m3">
                <input id="search" type="text" class="validate">
                <label for="search">Search by Tutor Name</label>
            </div>
            <div class="input-field col s12 m3">
              <input id="subject-filter" type="text" class="validate">
              <label for="subject-filter">Filter by Subject</label>
          </div>          
            <div class="input-field col s12 m3">
                <select id="day-filter">
                    <option value="" disabled selected>Choose Day</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                </select>
                <label>Filter by Day</label>
            </div>
            <div class="input-field col s12 m3">
                <input id="time-filter" type="text" class="validate">
                <label for="time-filter">Filter by Time</label>
            </div>
            <div class="col s12">
                <button class="btn waves-effect waves-light" onclick="searchTutors()">Search
                    <i class="material-icons right"></i>
                </button>
            </div>
        </div>
<div class="container">
  <div class="section">
    <h4>Tutoring Schedule</h4>
    <!-- Other content and filter options can go here -->
    <div class="row">
      <!-- Calendar structure -->
      <!-- HTML Structure -->
        <div class="col s12">
          <!-- Monday -->
          <ul id="monday-tutors" class="collection with-header">
            <li class="collection-header"><h5>Monday</h5></li>
          </ul>
          <ul id="tuesday-tutors" class="collection with-header">
            <li class="collection-header"><h5>Tuesday</h5></li>
          </ul>
          <ul id="wednesday-tutors" class="collection with-header">
            <li class="collection-header"><h5>Wednesday</h5></li>
          </ul>
          <ul id="thursday-tutors" class="collection with-header">
            <li class="collection-header"><h5>Thursday</h5></li>
          </ul>
          <ul id="friday-tutors" class="collection with-header">
            <li class="collection-header"><h5>Friday</h5></li>
          </ul>
        </div>
    </div>
  </div>
</div>
<iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&bgcolor=%23ffffff&ctz=America%2FNew_York&src=emFwZW5nNzc2QGdtYWlsLmNvbQ&src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=Y2xhc3Nyb29tMTE0ODYwNTQ4ODU4NzY1Nzc2MTgzQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=NTU1MmUxMjZlOWI2YWMwZjJiYzhiYjE4YjhiNzAxNjIwNWI0OWQ2ZmRhZWE4YzVhNjk5ZDE2YzMwMDlkN2U5M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=Y2xhc3Nyb29tMTEzMDI2NjA2OTIyNDI5NTQ5NDY3QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=ZW4udXNhI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=bWVrcmV2aWV3LmNvbV9jbGFzc3Jvb20zMzI2MzA4NUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5&color=%2333B679&color=%230047a8&color=%23F09300&color=%230047a8&color=%230B8043&color=%230047a8" style="border:solid 1px #777" width="800" height="600" frameborder="0" scrolling="no"></iframe>


<footer class="page-footer grey lighten-3">
<!-- <footer class="page-footer grey lighten-3">
  <div class="container">
    <span class="black-text">Footer: with Insta, Facebook, Linkedin (the what-if socials)</span>
  </div>
</footer>
</footer> -->


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
  $(document).ready(function() {
      // Check account type
      function checkAccountType() {
        $.get('/accountType', function(data) {
            if (data.account_type === 'Admin') {
                $('#adminLink').show();
                $('#materials').show();
            }
            if (data.account_type == 'Tutor') {
                $('#manageAccount').show();
            }
        });
    }

      checkAccountType();  
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elemsSelect = document.querySelectorAll('select');
    var instancesSelect = M.FormSelect.init(elemsSelect);
  
    // Fetch tutor data from the server
    fetch('/tutors') // Make sure this is the correct endpoint
      .then(response => response.json())
      .then(data => {
    // Assume you have an object with keys for each day of the week
      const days = {
          'Monday': document.getElementById('monday-tutors'),
          'Tuesday': document.getElementById('tuesday-tutors'),
          'Wednesday': document.getElementById('wednesday-tutors'),
          'Thursday': document.getElementById('thursday-tutors'),
          'Friday': document.getElementById('friday-tutors'),
    };

    data.forEach(tutor => {
        const tutorItem = document.createElement('li');
        tutorItem.classList.add('collection-item', 'tutor');
        tutorItem.textContent = `${tutor.username} - ${tutor.email} - ${tutor.subject} - ${tutor.day_available} - ${tutor.time_available}`;
        
        tutorItem.setAttribute('data-subject', tutor.subject || 'N/A');
        tutorItem.setAttribute('data-day_available', tutor.day_available || 'N/A');
        tutorItem.setAttribute('data-time_available', tutor.time_available || 'N/A');

        // Append the tutor to the correct day list based on their availability
        if (days[tutor.day_available]) {
            days[tutor.day_available].appendChild(tutorItem);
        } else {
            console.error('Day not found for tutor:', tutor);
        }
    });
})
.catch(error => {
    console.error('Error fetching tutor data:', error);
});

  });
  
  function searchTutors() {
    var searchInput = document.getElementById('search').value.toLowerCase();
    var subjectFilter = document.getElementById('subject-filter').value.toLowerCase();
    var dayFilter = document.getElementById('day-filter').value;
    var timeFilter = document.getElementById('time-filter').value.toLowerCase();
    var tutors = document.querySelectorAll('.tutor');
    console.log('Filters:', {searchInput, subjectFilter, dayFilter, timeFilter});
    tutors.forEach(function(tutor) {
        var name = tutor.textContent.toLowerCase();
        var subject = tutor.getAttribute('data-subject').toLowerCase();
        var day = tutor.getAttribute('data-day_available').toLowerCase();
        var time = tutor.getAttribute('data-time_available').toLowerCase();
        console.log('Tutor Data:', {name, subject, day, time});
        var nameMatch = name.includes(searchInput);
        var subjectMatch = (subjectFilter === '' || subject.includes(subjectFilter));
        var dayMatch = (dayFilter === '' || day === dayFilter.toLowerCase());
        var timeMatch = (timeFilter === '' || time.includes(timeFilter));
        console.log('Matches:', {nameMatch, subjectMatch, dayMatch, timeMatch});
        if (nameMatch && subjectMatch && dayMatch && timeMatch) {
            tutor.style.display = '';
        } else {
            tutor.style.display = 'none';
        }
    });
    
}
  
  </script>
</body>
</html>