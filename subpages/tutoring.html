<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BCA BLSU Tutoring Schedule</title>
<!-- Compiled and minified Materialize CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<style>


  body{
    justify-content: scroll;
  }
  .tutor {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }

  h4{
    font-weight: bold;
  }

  .brand-logo {
    font-weight: bold;
    color: #FFD700;
    font-size: 80px;
    margin-left: 20px;
}
.nav-wrapper {
    background-color: #000000; /* Make the navbar entirely black */
}
body {
  background: #eeeeee;
}

#nav-mobile li a:hover {
    color: #ffeb3b;
}

  .calendar-iframe {
  border: none; /* Removes the border */
  width: 100%; /* Makes the iframe take the full width of its container */
  max-width: 800px; /* Maximum width, feel free to adjust */
  height: 600px; /* Height, feel free to adjust */
  box-shadow: 0 4px 8px 0 rgba(218, 24, 24, 0.2); /* Optional: Adds a shadow for some depth */
  border-radius: 20px; /* Optional: Rounds the corners */
  overflow: hidden; /* Ensures the content doesn't overflow */
}

/* Import the Roboto font from Google Fonts */
@import url('https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap');

/* Base button style */
.button {
    font-family: 'Roboto', sans-serif; /* Material Design typography */
    font-size: 14px; /* Standard font size */
    font-weight: 500; /* Medium weight */
    text-transform: uppercase; /* Capitalize text */
    color: #fff; /* Text color on the button */
    background-color: #009688; /* Replace with your primary color */
    border: none; /* No border */
    border-radius: 4px; /* Rounded corners */
    padding: 10px 20px; /* Padding inside the button */
    margin: 10px; /* Margin around the button */
    cursor: pointer; /* Hand cursor on hover */
    transition: box-shadow 0.2s; /* Smooth transition for the shadow */
    outline: none; /* Remove the outline */
}

/* Ripple effect on click */
.button::after {
    content: '';
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    background-image: radial-gradient(circle, #000000 10%, transparent 10.01%);
    background-repeat: no-repeat;
    background-position: 50%;
    transform: scale(10, 10);
    opacity: 0;
    transition: transform 0.5s, opacity 1s;
}

.button:active::after {
    transform: scale(0, 0);
    opacity: 0.3;
    transition: 0s;
}

/* Hover effect for the button */
.button:hover {
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Shadow effect */
}

/* Secondary button style if needed */
.secondary-button {
    background-color: #607D8B; /* Secondary color */
}

/* Apply this class for disabled buttons */
.button:disabled {
    background-color: #E0E0E0; /* Greyed out */
    color: #9E9E9E;
    cursor: default;
    box-shadow: none;
}

.calendar{
  display: center;
  justify-content: center;
  align-items: center;
  text-align:center; 

}


/* Ensure that the HTML elements that represent buttons have the class 'button' */




</style>
    <link rel="stylesheet" href="index.css">


<script type ='text/javascript'>
          var CLIENT_ID=760416223091-rpt1uq9hc8qcrjdtuf6pamtnpslt8frp.apps.googleusercontent.com
          var CLIENT_SECRET=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

          require('dotenv').config();
          const express = require('express');
          const {google} = require('googleapis');
          const app = express();
          const port = 3000;

          // Replace with your credentials
          // const CLIENT_ID = process.env.CLIENT_ID;
          // const CLIENT_SECRET = process.env.CLIENT_SECRET;
          const REDIRECT_URI = 'http://localhost:3000/oauth2callback';

          const oAuth2Client = new google.auth.OAuth2(CLIENT_ID, CLIENT_SECRET, REDIRECT_URI);

          // Visit this URL to authorize the app
          app.get('/', (req, res) => {
            const authUrl = oAuth2Client.generateAuthUrl({
              access_type: 'offline',
              scope: ['https://www.googleapis.com/auth/calendar'],
            });
            res.send(`<a href="${authUrl}">Authorize Google Calendar</a>`);
          });

          // Google redirects here after authorization
          app.get('/oauth2callback', async (req, res) => {
            const {tokens} = await oAuth2Client.getToken(req.query.code);
            oAuth2Client.setCredentials(tokens);

            const calendar = google.calendar({version: 'v3', auth: oAuth2Client});
            const event = {
              summary: 'New Event',
              location: '800 Howard St., San Francisco, CA 94103',
              description: 'A chance to hear more about Google\'s developer products.',
              start: {
                dateTime: '2024-03-05T09:00:00-07:00',
                timeZone: 'America/Los_Angeles',
              },
              end: {
                dateTime: '2024-03-05T17:00:00-07:00',
                timeZone: 'America/Los_Angeles',
              },
            };

            try {
              const result = await calendar.events.insert({
                calendarId: 'primary',
                resource: event,
              });
              res.send('Event created: ' + result.data.htmlLink);
            } catch (error) {
              res.send(error.message);
            }
          });

          function handleAuthClick(event) {
              // Redirect the user to the server endpoint that initiates the OAuth flow
          }

          app.listen(port, () => {
            console.log(`Server running at http://localhost:${port}`);
          });

            </script>


          <script src="https://apis.google.com/js/client.js?onload=checkAuth">
          </script>




          </head>
          <body>
          <!-- <nav class="grey lighten-4">
            <div class="nav-wrapper container">
              <a href="#" class="brand-logo black-text">BCA BLSU</a>
              <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="#" class="black-text">Login</a></li>
              </ul>
            </div>
          </nav> -->

          <main>
              <nav class="black">
                <div class="nav-wrapper">
                      <a href="#" class="brand-logo">BCA BLSU</a>
                      <ul id="nav-mobile" class="right hide-on-med-and-down">
                          <!-- ... all other navigation links from index.html ... -->
                          <li><a class="dropdown-trigger" href="#!" data-target="dropdown1"> <a href="/">Home</a>   </a></li>
                          <li id="materials" style="display: none;"><a href="https://drive.google.com/drive/folders/0APK1G8QsNfm2Uk9PVA">Club Materials</a></li>                   
                          <li><a class="dropdown-trigger" href="#!" data-target="dropdown3">  <a href="hhm.html">  Lesson Plans </a></li>
                          <li><a class="dropdown-trigger" href="#!" data-target="dropdown5"> <a href="blog.html">Announcements</a></li>
                          <li id="manageAccount"><a href="account.html">Manage Account</a></li>            
                          <li id="adminLink" style="display: none;"><a href="admin.html">Administrator</a></li>   
                      </ul>
                  </div>
                </nav>
                  
                  <!-- Dropdown Structure -->
                  <ul id="dropdown1" class="dropdown-content">
                    <li><a href="/tutoring.html">Tutoring</a></li>
                    <li><a href="/tutoring.html">Sub-Item 1</a></li>
                    <li><a href="/tutoring.html">Sub-Item 2</a></li>
                  </ul>
                  
                  <ul id="dropdown2" class="dropdown-content">
                    <li><a href="/club-materials.html">Club Materials</a></li>
                    <li><a href="/club-materials.html">Sub-Item 1</a></li>
                    <li><a href="/club-materials.html">Sub-Item 2</a></li>
                  </ul>
                  
                  <ul id="dropdown3" class="dropdown-content">
                    <li><a href="/black-history-month.html">Black History Month</a></li>
                    <li><a href="/black-history-month.html">Sub-Item 1</a></li>
                    <li><a href="/black-history-month.html">Sub-Item 2</a></li>
                  </ul>
                  
            </main>
            <div class="container">
              <div class="section">
                  <h4>Tutoring Schedule</h4>
                  <div class="row">
                      <div class="input-field col s12 m3">
                          <input id="search" type="text" class="validate">
                          <label for="search">Search by Tutor Name</label>
                      </div>
                      <div class="input-field col s12 m3">
                        <input id="subject-filter" type="text" class="validate">
                        <label for="subject-filter">Filter by Subject</label>
                    </div>          
                      <div class="input-field col s12 m3">
                          <select id="day-filter">
                              <option value="" disabled selected>Choose Day</option>
                              <option value="Monday">Monday</option>
                              <option value="Tuesday">Tuesday</option>
                              <option value="Wednesday">Wednesday</option>
                              <option value="Thursday">Thursday</option>
                              <option value="Friday">Friday</option>
                          </select>
                          <label>Filter by Day</label>
                      </div>

                    <div class="input-field col s12 m3">
                          <input id="time-filter" type="text" class="validate">
                          <label for="time-filter">Filter by Time</label>
                      </div> 


                    <!-- 
                      <div class="input-field col s12 m3">
                        <select id="day-filter">
                            <option value="AM">AM</option>
                            <option value="PM">PM</option> -->
                         
                        </select>
                        <label>Filter by Day</label>
                    </div>
                      
                      <div class="col s12">
                          <button class="btn waves-effect waves-light" onclick="searchTutors()">Search
                              <i class="material-icons right"></i>
                          </button> 
                      </div>

                  </div>
                  </div> 


          <div class="container">
            <div class="section">
              <h4>Our Tutor's Availability</h4>
              <!-- Other content and filter options can go here -->
              <div class="row">
                <!-- Calendar structure -->
                <!-- HTML Structure -->
                  <div class="col s12">
                    <!-- Monday -->
                    <ul id="monday-tutors" class="collection with-header">
                      <li class="collection-header"><h5>Monday</h5></li>
                    </ul>
                    <ul id="tuesday-tutors" class="collection with-header">
                      <li class="collection-header"><h5>Tuesday</h5></li>
                    </ul>
                    <ul id="wednesday-tutors" class="collection with-header">
                      <li class="collection-header"><h5>Wednesday</h5></li>
                    </ul>
                    <ul id="thursday-tutors" class="collection with-header">
                      <li class="collection-header"><h5>Thursday</h5></li>
                    </ul>
                    <ul id="friday-tutors" class="collection with-header">
                      <li class="collection-header"><h5>Friday</h5></li>
                    </ul>
                  </div>
              </div>
            </div>
          </div>


          <div class="calendar">

          <h4>Schedule a Tutor</h4>

          <!-- Google Calendar Appointment Scheduling begin -->


          Book you Appointment today: 
          <link href="https://calendar.google.com/calendar/scheduling-button-script.css" rel="stylesheet">
          <script src="https://calendar.google.com/calendar/scheduling-button-script.js" async></script>
          <script>
          (function() {
            var target = document.currentScript;
            window.addEventListener('load', function() {
              calendar.schedulingButton.load({
                url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ1V8jNTsTeOY-ti5UpCiSgfg4PBvdHhGriNDDi0vJZqomwU4zAd5uwOTVttrVCpwXPfSrerLMci?gv=true',
                color: '#26a69a',
                label: 'Book an appointment',
                target,
              });
            });
          })();

        </script>
        </div>

<!-- end Google Calendar Appointment Scheduling -->


<!-- Authorize access to Google Calendar API to Sync your calendar with all BLSU events  -->
<!-- 

<div id="authorize-div" class="col s12">

  <button class="btn waves-effect waves-light" onclick="handleAuthClick(event)">
    Authorize
  </button> 
  <pre id="output"></pre>
</div>
 -->

<br>

<iframe src="https://embed.styledcalendar.com/#U4mo0AvsmePhH5r980HE" title="Styled Calendar" class="styled-calendar-container" style="width: 100%; border: none;" data-cy="calendar-embed-iframe"></iframe>
<script async type="module" src="https://embed.styledcalendar.com/assets/parent-window.js"></script>
<!-- 
<iframe id = class="calendar-iframe"

src="https://calendar.google.com/calendar/embed?height=600&wkst=1&bgcolor=%23ffffff&ctz=America%2FNew_York&src=emFwZW5nNzc2QGdtYWlsLmNvbQ&src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=Y2xhc3Nyb29tMTE0ODYwNTQ4ODU4NzY1Nzc2MTgzQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=NTU1MmUxMjZlOWI2YWMwZjJiYzhiYjE4YjhiNzAxNjIwNWI0OWQ2ZmRhZWE4YzVhNjk5ZDE2YzMwMDlkN2U5M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=Y2xhc3Nyb29tMTEzMDI2NjA2OTIyNDI5NTQ5NDY3QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20&src=ZW4udXNhI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=bWVrcmV2aWV3LmNvbV9jbGFzc3Jvb20zMzI2MzA4NUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5&color=%2333B679&color=%230047a8&color=%23F09300&color=%230047a8&color=%230B8043&color=%230047a8" style="border:solid 1px #777" width="800" height="600" frameborder="0" scrolling="no"></iframe>


 -->


<!-- end Google Calendar Appointment Scheduling -->

<!-- <footer class="page-footer grey lighten-3">
  <div class="container">
    <span class="black-text">Footer: with Insta, Facebook, Linkedin (the what-if socials)</span>
  </div>
</footer>
</footer> -->



  <div class="section mt-5">
    <h4>Schedule a Tutor</h4>
    <form id="schedule-form">
      <div class="form-group">
        <label for="student-name">Name</label>
        <input type="text" class="form-control" id="student-name" required>
      </div>
      <div class="form-group">
        <label for="student-email">Email</label>
        <input type="email" class="form-control" id="student-email" required>
      </div>
      <div class="form-group">
        <label for="tutor-selection">Select Tutor (Name or Email)</label>
        <select class="form-control" id="tutor-selection" required>
          <option value="" disabled selected>Select Tutor</option>
          <!-- Tutor options will be populated here -->
        </select>
      </div>
      <div class="form-group">
        <label for="appointment-date">Date</label>
        <input type="date" class="form-control" id="appointment-date" required>
      </div>
      <div class="form-group">
        <label for="time-selection">Select Time</label>
        <select class="form-control" id="time-selection" required>
          <option value="" disabled selected>Select Time</option>
          <!-- Time options will be populated here based on selected tutor -->
        </select>
      </div>
      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea class="form-control" id="notes" rows="3"></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>




<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
  $(document).ready(function() {
      // Check account type
      function checkAccountType() {
        $.get('/accountType', function(data) {
            if (data.account_type === 'Admin') {
                $('#adminLink').show();
                $('#materials').show();
            }
            
        });
    }

      checkAccountType();  
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elemsSelect = document.querySelectorAll('select');
    var instancesSelect = M.FormSelect.init(elemsSelect);
  
    // Fetch tutor data from the server
    fetch('/tutors') // Make sure this is the correct endpoint
      .then(response => response.json())
      .then(data => {
    // Assume you have an object with keys for each day of the week
      const days = {
          'Monday': document.getElementById('monday-tutors'),
          'Tuesday': document.getElementById('tuesday-tutors'),
          'Wednesday': document.getElementById('wednesday-tutors'),
          'Thursday': document.getElementById('thursday-tutors'),
          'Friday': document.getElementById('friday-tutors'),
    };

    data.forEach(tutor => {
        const tutorItem = document.createElement('li');
        tutorItem.classList.add('collection-item', 'tutor');
        tutorItem.textContent = `${tutor.username} - ${tutor.email} - ${tutor.subject} - ${tutor.time_available}`;
        
        tutorItem.setAttribute('data-subject', tutor.subject || 'N/A');
        tutorItem.setAttribute('data-day_available', tutor.day_available || 'N/A');
        tutorItem.setAttribute('data-time_available', tutor.time_available || 'N/A');

        // Append the tutor to the correct day list based on their availability
        if (days[tutor.day_available]) {
            days[tutor.day_available].appendChild(tutorItem);
        } else {
            console.error('Day not found for tutor:', tutor);
        }
    });
})
.catch(error => {
    console.error('Error fetching tutor data:', error);
});

  });
  
  function searchTutors() {
    var searchInput = document.getElementById('search').value.toLowerCase();
    var subjectFilter = document.getElementById('subject-filter').value.toLowerCase();
    var dayFilter = document.getElementById('day-filter').value;
    var timeFilter = document.getElementById('time-filter').value.toLowerCase();
    var tutors = document.querySelectorAll('.tutor');
    console.log('Filters:', {searchInput, subjectFilter, dayFilter, timeFilter});
    tutors.forEach(function(tutor) {
        var name = tutor.textContent.toLowerCase();
        var subject = tutor.getAttribute('data-subject').toLowerCase();
        var day = tutor.getAttribute('data-day_available').toLowerCase();
        var time = tutor.getAttribute('data-time_available').toLowerCase();
        console.log('Tutor Data:', {name, subject, day, time});
        var nameMatch = name.includes(searchInput);
        var subjectMatch = (subjectFilter === '' || subject.includes(subjectFilter));
        var dayMatch = (dayFilter === '' || day === dayFilter.toLowerCase());
        var timeMatch = (timeFilter === '' || time.includes(timeFilter));
        console.log('Matches:', {nameMatch, subjectMatch, dayMatch, timeMatch});
        if (nameMatch && subjectMatch && dayMatch && timeMatch) {
            tutor.style.display = '';
        } else {
            tutor.style.display = 'none';
        }
    });
    
}


  
  </script>
</body>
</html>